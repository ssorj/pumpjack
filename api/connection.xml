<class name="connection" type="endpoint">
  A top-level channel for communication.
  
  In current implementations, a connection corresponds to a TCP
  connection, represented by a transport.

  A connection object contains zero or more session objects,
  which in turn contain zero or more link objects.  Each link
  object contains an ordered sequence of delivery objects.

  <!-- What behaviors do you get by default? -->

  <link node="connection-options"/>
  <link node="transport"/>
  <link node="session"/>
  
  <link relation="amqp" href="https://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-transport-v1.0-os.html#section-connections">Conceptual overview</link>
  <link relation="amqp" href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-transport-v1.0-os.html#type-open">Open performative</link>
  <link relation="amqp" href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-transport-v1.0-os.html#type-close">Close performative</link>

  <group name="basic">
    <property name="transport" type="transport">
      The associated transport.
    </property>

    <property name="sessions" type="iterator" item-type="session">
      The sessions contained in this connection.
    </property>

    <property name="links" type="iterator" item-type="link">
      The links contained in this connection.
    </property>

    <property name="deliveries" type="iterator" item-type="delivery">
      The deliveries contained in this connection.
    </property>
    
    <method name="open">
      Open the connection.

      The operation is complete when on-connection-open fires.

      <link node="/proton/core/handler/on-connection-open"/>

      <input name="options" type="connection-options" optional="true"/>
    </method>

    <method name="close">
      Close the connection.

      The operation is complete when on-connection-close fires.
      
      <link node="/proton/core/handler/on-connection-close"/>
    
      <input name="condition" type="condition" optional="true"/>
    </method>
  </group>
  
  <group name="message-operations">
    <method name="send" experimental="true">
      Send a message on the default session.

      <input name="message" type="message"/>
      <output name="delivery" type="delivery"/>
    </method>

    <method name="send-request" proposed="true">
      Send a request message.  The message reply-to property is
      set automatically.

      <link node="/proton/core/message/reply-to"/>

      <input name="message" type="message"/>
      <output name="delivery" type="delivery"/>
    </method>

    <method name="send-response" proposed="true">
      Send a response message.  The message to and
      correlation-id properties are set automatically.

      <link node="/proton/core/message/to"/>
      <link node="/proton/core/message/correlation-id"/>

      <input name="response-message" type="message"/>
      <input name="request-message" type="message"/>
      <output name="delivery" type="delivery"/>
    </method>
  </group>

  <group name="link-operations">
    <method name="open-sender">
      Create and open a sender using the default session.

      The operation is complete when on-sender-open fires.

      <link node="/proton/core/handler/on-sender-open"/>

      <input name="address" type="string"/>
      <input name="options" type="link-options" optional="true"/>
      <output name="sender" type="sender"/>
    </method>

    <method name="open-receiver">
      Create and open a receiver using the default session.

      The operation is complete when on-receiver-open fires.

      <link node="/proton/core/handler/on-receiver-open"/>

      <input name="address" type="string"/>
      <input name="options" type="link-options" optional="true"/>
      <output name="receiver" type="receiver"/>
    </method>
  </group>

  <group name="session-operations" title="Session operations">
    <property name="default-session" type="session" value="[instance]">
      The session used by open-sender and open-receiver.
    </property>

    <method name="open-session">
      Create and open a session.

      <input name="options" type="session-options" optional="true"/>
      <output name="session" type="session"/>
    </method>
  </group>

  <group name="identity">
    <property name="container-id" type="string" value="[discovered]">
      The unique identity of the container.
    </property>
    
    <property name="virtual-host" type="string" value="[discovered]">
      The virtual host name.
    </property>

    <property name="user" type="string" value="[discovered]">
      The user name or ID for authentication.
    </property>
  </group>

  <group name="resource-limits">
    <property name="idle-timeout" type="duration" value="[discovered]">
      The time after which an idle connection expires.
    </property>

    <property name="max-sessions" type="ushort" value="[discovered]">
      The maximum active sessions allowed.
    </property>
    
    <property name="max-frame-size" type="uint" value="[discovered]">
      The maximum frame size allowed.
    </property>
  </group>
</class>
