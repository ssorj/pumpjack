<class name="handler">
  The Proton event handler.  It allows users to intercept and
  change Proton behaviors.

  <link node="event"/>
  <link node="/proton/core/container/constructor"/>

  <group name="common" title="Common-case application events">
    <method name="on-container-start">
      The container event loop is started.

      <link node="/proton/core/container/run"/>
      
      <input type="event"/>
      <input type="container"/>
    </method>

    <method name="on-container-stop" proposed="true">
      The container event loop is stopped.
      
      <link node="/proton/core/container/stop"/>
      
      <input type="event"/>
      <input type="container"/>
    </method>

    <method name="on-message">
      A message is received.

      <link node="/proton/core/sender/send"/>
      
      <input type="event"/>
      <input type="message"/>
    </method>

    <method name="on-sendable">
      A message can be sent.
      
      The sender has credit and messages can therefore be
      transferred.
      
      <link node="/proton/core/link/credit"/>
      <link node="/proton/core/sender/send"/>
      
      <input type="event"/>
      <input type="sender"/>
    </method>
  </group>

  <group name="endpoint-lifecycle">
    <method name="on-connection-open">
      The remote peer opened the connection.

      <link node="/proton/core/container/connect"/>
      <link node="/proton/core/connection/open"/>
      
      <input type="event"/>
      <input type="connection"/>
    </method>

    <method name="on-connection-close">
      The remote peer closed the connection.
      
      <link node="/proton/core/connection/close"/>

      <input type="event"/>
      <input type="connection"/>
    </method>
      
    <method name="on-connection-error">
      The remote peer closed the connection with an error
      condition.
      
      <link node="/proton/core/connection/close"/>
      
      <input type="event"/>
      <input type="connection"/>
    </method>

    <method name="on-session-open">
      The remote peer opened the session.
      
      <link node="/proton/core/session/open"/>
      
      <input type="event"/>
      <input type="session"/>
    </method>
    
    <method name="on-session-close">
      The remote peer closed the session.
      
      <link node="/proton/core/session/close"/>
      
      <input type="event"/>
      <input type="session"/>
    </method>

    <method name="on-session-error">
      The remote peer closed the session with an error
      condition.
      
      <link node="/proton/core/session/close"/>
      
      <input type="event"/>
      <input type="session"/>
    </method>

    <method name="on-sender-open">
      The remote peer opened the sender.
      
      <input type="event"/>
      <input type="sender"/>
    </method>

    <method name="on-sender-detach" proposed="true">
      The remote peer detached the sender.
      
      <input type="event"/>
      <input type="sender"/>
    </method>
     
    <method name="on-sender-close">
      The remote peer closed the sender.
      
      <input type="event"/>
      <input type="sender"/>
    </method>
     
    <method name="on-sender-error">
      The remote peer closed the sender with an error condition.
      
      <input type="event"/>
      <input type="sender"/>
    </method>

    <method name="on-receiver-open">
      The remote peer opened the receiver.
      
      <input type="event"/>
      <input type="receiver"/>
    </method>

    <method name="on-receiver-detach" proposed="true">
      The remote peer detached the receiver.
      
      <input type="event"/>
      <input type="receiver"/>
    </method>
     
    <method name="on-receiver-close">
      The remote peer closed the receiver.
      
      <input type="event"/>
      <input type="receiver"/>
    </method>
     
    <method name="on-receiver-error">
      The remote peer closed the receiver with an error condition.
      
      <input type="event"/>
      <input type="receiver"/>
    </method>
  </group>

  <group name="flow-control">
    <link node="/proton/core/receiver/flush"/>
    
    <method name="on-sender-flush" proposed="true">
      The remote end of the sender requested flushing.

      <input type="event"/>
      <input type="sender"/>
    </method>
    
    <method name="on-receiver-flush" proposed="true">
      The remote end of the receiver finished flushing.
      
      <input type="event"/>
      <input type="receiver"/>
    </method>
  </group>

  <group name="deliveries" title="Deliveries">
    <method name="on-delivery">
      A delivery is received.

      <link node="/proton/core/sender/send"/>
      
      <input type="event"/>
      <input type="delivery"/>
    </method>

    <method name="on-delivery-accept">
      The remote peer accepted a delivery.
      
      <input type="event"/>
      <input type="delivery-ticket"/>
    </method>
    
    <method name="on-delivery-reject">
      The remote peer rejected a delivery.

      XXX error condition
      
      <input type="event"/>
      <input type="delivery-ticket"/>
    </method>
    
    <method name="on-delivery-release">
      The remote peer released a delivery.  Note that this may be in
      response to either the RELEASE or MODIFIED state as defined by
      the AMQP specification.
      
      <input type="event"/>
      <input type="delivery-ticket"/>
    </method>
    
    <method name="on-delivery-settle">
      The remote peer settled a delivery.  This is the
      point at which it should never be retransmitted.
      
      <input type="event"/>
      <input type="delivery-ticket"/>
    </method>
  </group>

  <group name="transport-lifecycle" title="Transport lifecycle">
    <method name="on-transport-open">
      The underlying network channel opened.
      
      <input type="event"/>
      <input type="transport"/>
    </method>
    
    <method name="on-transport-close">
      The underlying network channel closed.
      
      <input type="event"/>
      <input type="transport"/>
    </method>
      
    <method name="on-transport-error">
      The underlying network channel closed with an error
      condition.
      
      <input type="event"/>
      <input type="transport"/>
    </method>
  </group>

  <group name="fallbacks" title="Fallback event handling">
    <method name="on-unhandled">
      The fallback event handler.
      
      Called if an event handler function is not overriden to
      handle an event.

      <input type="event"/>
    </method>

    <method name="on-unhandled-error">
      The fallback error handler.
      
      Called if an error handler function is not overriden to
      handle an error.
      
      <input type="event"/>
      <input type="condition"/>
    </method>
  </group>

  <!--
  <group name="transactions">
    <method name="on-transaction-declare" experimental="true">
      The remote peer declared a transaction.
      
      <input type="event"/>
    </method>

    <method name="on-transaction-commit" experimental="true">
      The remote peer committed a transaction.
      
      <input type="event"/>
    </method>

    <method name="on-transaction-abort" experimental="true">
      The remote peer aborted a transaction.
      
      <input type="event"/>
    </method>
  </group>
  -->  
</class>
