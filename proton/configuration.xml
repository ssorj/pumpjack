<class name="endpoint-options">
  The base class for connection-options, session-options, and
  link-options.
  
  <group name="extended-attributes">
    <property name="properties" type="map" mutable="true" nullable="true">
      Application properties defined by the local endpoint.
    </property>

    <property name="offered-capabilities" type="list" item-type="symbol" mutable="true" nullable="true">
      Extensions the local endpoint supports.
    </property>
    
    <property name="desired-capabilities" type="list" item-type="symbol" mutable="true" nullable="true">
      Extensions the local endpoint can use.
    </property>
  </group>

  <group name="events">
    <property name="handler" type="@handler" mutable="true" nullable="true">
      The event handler for the endpoint.
    </property>
  </group>
</class>

<class name="connection-options" type="@endpoint-options">
  Options for new connections.
  
  <link node="@/proton/core/connection"/>
  <link node="@/proton/core/container/connect"/>
  <link node="@/proton/core/container/listen"/>

  <link href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-transport-v1.0-os.html#type-open">AMQP definition</link>

  <group name="basic">
    <property name="host" type="string" mutable="true" nullable="true" proposed="true">
      The connection host name.
    </property>
    
    <property name="container-id" type="string" value="[generated]" mutable="true" nullable="true">
      The connection container ID.
    </property>
    
    <property name="idle-timeout" type="duration" mutable="true" nullable="true">
      Expire the connection after a period of inactivity.
    </property>

    <property name="max-sessions" type="integer" mutable="true" nullable="true" proposed="true">
      Limit the number of active sessions.
    </property>

    <property name="max-frame-size" type="integer" mutable="true" nullable="true">
      Limit the size of AMQP frames.
    </property>
  </group>

  <group name="security">
    <property name="user" type="string" mutable="true" nullable="true" proposed="true">
      The user name for authentication.
    </property>

    <property name="password" type="string" mutable="true" nullable="true" proposed="true">
      The user's password.
    </property>
    
    <property name="sasl-enabled" type="boolean" value="[?]" mutable="true">
      Enable or disable the SASL security layer.
    </property>
    
    <property name="sasl-allow-insecure-mechs" type="boolean" value="[?]" mutable="true">
    </property>
    
    <property name="sasl-allowed-mechs" type="string" value="[?]" mutable="true">
    </property>
    
    <property name="sasl-config-name" type="string" value="[?]" mutable="true">
    </property>
    
    <property name="sasl-config-path" type="string" value="[?]" mutable="true">
    </property>
    
    <property name="ssl-client-options" type="@ssl-client-options" value="[instance]">
    </property>
    
    <property name="ssl-server-options" type="@ssl-server-options" value="[instance]">
    </property>
  </group>
</class>

<class name="session-options" type="@endpoint-options">
  Options for new sessions.
  
  <link node="@/proton/core/session"/>
  <link node="@/proton/core/connection/open-session"/>

  <link href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-transport-v1.0-os.html#type-begin">AMQP definition</link>
  
  <group name="flow-control">
    <property name="incoming-capacity" type="integer" mutable="true" nullable="true">
      Limit the number of incoming bytes the session will buffer.
    </property>
    
    <property name="incoming-window" type="integer" mutable="true" nullable="true">
      Limit the number of incoming transfer frames.
    </property>
    
    <property name="outgoing-window" type="integer" mutable="true" nullable="true">
      Limit the number of outgoing transfer frames.
    </property>
  </group>
</class>

<class name="link-options" type="@endpoint-options">
  Options for new links.
  
  <link node="@/proton/core/link"/>
  <link node="@/proton/core/container/open-receiver"/>
  <link node="@/proton/core/container/open-sender"/>

  <link href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-transport-v1.0-os.html#type-attach">AMQP definition</link>

  <group name="basic">
    <property name="name" type="string" value="[generated]" mutable="true">
      Set the link name.
    </property>

    <property name="filter" type="string" mutable="true" nullable="true" hidden="true">
      Select messages by criteria.
    </property>
      
    <property name="max-message-size" type="integer" mutable="true" nullable="true">
      Limit the size of messages on the link.
    </property>
    
    <property name="delivery-mode" type="@delivery-mode" value="AT-LEAST-ONCE" mutable="true">
      Control the message delivery guarantee.
    </property>
    
    <property name="distribution-mode" type="@distribution-mode" value="MOVE" mutable="true">
      Control whether messsages are browsed or consumed.  This
      is a receiver-only option.
    </property>

    <property name="durable" type="boolean" value="false" mutable="true">
      Create a persistent receiver.  This is a receiver-only
      option.
    </property>
    
    <property name="dynamic" type="boolean" value="false" mutable="true">
      Request a dynamically created node at the peer.
    </property>
    
    <property name="dynamic-node-properties" type="map" item-type="symbol" internal="true">
      Control the properties of nodes created on demand.

      XXX lifetime-policy, supported-dist-modes

      <link href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-node-properties">XXX</link>
    </property>
  </group>
</class>

<enumeration name="delivery-mode">
  <value name="AT-MOST-ONCE">
    Unreliable delivery.  The sender settles the message as
    soon as it sends it.  If the connection is lost before the
    message is received, the message will not be delivered.

    <link href="{{{{site_url}}}}/delivery-guarantees.html">Delivery guarantees</link>
  </value>

  <value name="AT-LEAST-ONCE">
    Reliable delivery.  The receiver accepts and settles the
    message on receipt.  If the connection is lost before the
    sender is informed of the settlement, then the delivery is
    considered in-doubt and will be retried.  This will ensure
    it eventually gets delivered, provided the connection and
    link can be reestablished.  It may, however, be delivered
    multiple times.

    <link href="{{{{site_url}}}}/delivery-guarantees.html">Delivery guarantees</link>
  </value>

  <value name="EXACTLY-ONCE">
    Reliable delivery with no duplicates.  The receiver
    accepts the message but doesn't settle it.  The sender
    settles once it is aware that the receiver accepted it.
    In this way the receiver retains knowledge of an accepted
    message until it is sure the sender knows it has been
    accepted.  If the connection is lost before settlement,
    the receiver informs the sender of all the unsettled
    deliveries it knows about, and from this the sender can
    deduce which need to be redelivered. The sender likewise
    informs the receiver which deliveries it knows about, from
    which the receiver can deduce which have already been
    settled.

    <link href="{{{{site_url}}}}/delivery-guarantees.html">Delivery guarantees</link>
  </value>
</enumeration>
